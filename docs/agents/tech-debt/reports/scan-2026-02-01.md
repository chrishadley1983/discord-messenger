# Tech Debt Scan Report - 2026-02-01

**Scan Type:** Full codebase scan (initial)
**Commit:** `150abbe273faff57aa1a23057935608eb88ac28d`
**Duration:** ~45 seconds

---

## Summary

| Priority | Count | Change |
|----------|-------|--------|
| CRITICAL | 0 | - |
| HIGH | 1 | +1 |
| MEDIUM | 8 | +8 |
| LOW | 3 | +3 |
| **Total** | **12** | **+12** |

---

## Findings by Category

### Complexity (CX) - 3 items

| ID | Priority | Title |
|----|----------|-------|
| DEBT-001 | HIGH | Monolithic hadley_api/main.py (5472 lines, 124 functions) |
| DEBT-002 | MEDIUM | Large peter_dashboard/app.py (2922 lines) |
| DEBT-003 | MEDIUM | Large domains/peterbot/parser.py (2706 lines) |

### Error Handling (ERR) - 2 items

| ID | Priority | Title |
|----|----------|-------|
| DEBT-004 | MEDIUM | Bare except clauses in hadley_api/main.py (5 instances) |
| DEBT-005 | MEDIUM | Bare except clauses in peter_dashboard/app.py (7 instances) |

### Architecture (ARCH) - 4 items

| ID | Priority | Title |
|----|----------|-------|
| DEBT-006 | MEDIUM | Repeated imports inside functions (61 occurrences) |
| DEBT-008 | MEDIUM | Environment variable access scattered across modules |
| DEBT-009 | MEDIUM | Global state management pattern (9 uses) |
| DEBT-011 | LOW | Synchronous requests in async-capable codebase |

### Dead Code / Code Hygiene (DC) - 2 items

| ID | Priority | Title |
|----|----------|-------|
| DEBT-007 | MEDIUM | Print statements instead of logging (210 instances) |
| DEBT-010 | LOW | Test code embedded in production parser.py |

### Dependencies (DEP) - 1 item

| ID | Priority | Title |
|----|----------|-------|
| DEBT-012 | LOW | Duplicate httpx versions in requirements |

---

## Priority Actions

### HIGH Priority (Fix before next feature)

1. **DEBT-001: Monolithic hadley_api/main.py**
   - 5472 lines, 124 functions in single file
   - 61 repeated imports inside functions
   - **Recommendation:** Split into route modules (gmail.py, calendar.py, drive.py, etc.)

### MEDIUM Priority (Schedule for cleanup)

2. **DEBT-004/005: Bare except clauses**
   - 12 total instances silently swallowing all exceptions
   - **Quick win:** Replace with `except Exception as e:` and add logging

3. **DEBT-007: Print statements**
   - 210 instances should use structured logging
   - **Recommendation:** Introduce logging module, replace incrementally

---

## What's NOT Debt (Verified)

- ✅ No `Any` type abuse (this is Python, not TypeScript)
- ✅ No wildcard imports (`from x import *`)
- ✅ No blocking `time.sleep()` in async code (uses `asyncio.sleep()`)
- ✅ No obvious circular imports detected
- ✅ Error handling uses appropriate `ValueError` for config issues
- ✅ Requirements files are well-structured with comments

---

## Scan Configuration

**Included:** `*.py` files
**Excluded:** `venv/`, `.venv/`, `__pycache__/`, `node_modules/`
**Categories scanned:** TS, CX, DC, DUP, ERR, ARCH, DEP
