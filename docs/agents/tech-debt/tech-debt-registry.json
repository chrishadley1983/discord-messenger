{
  "version": "1.0",
  "lastUpdated": "2026-02-01T12:00:00Z",
  "scanCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
  "items": [
    {
      "id": "DEBT-001",
      "category": "CX",
      "title": "Monolithic hadley_api/main.py (5472 lines)",
      "description": "The main.py file contains 124 functions and 5472 lines of code. All API endpoints are in a single file with imports repeated 61 times inside functions (e.g., 'from google_auth import get_gmail_service' appears in every endpoint). This violates separation of concerns and makes the code difficult to maintain, test, and navigate.",
      "location": { "file": "hadley_api/main.py", "line": 1 },
      "affectedFiles": ["hadley_api/main.py"],
      "scores": { "impact": 4, "spread": 1, "effortInverse": 2, "priority": 3.0 },
      "priorityLabel": "HIGH",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-002",
      "category": "CX",
      "title": "Large peter_dashboard/app.py (2922 lines)",
      "description": "Dashboard Flask app is a single 2922-line file. Contains mixed concerns: UI routes, WSL integration, process management, and API calls. Would benefit from splitting into modules.",
      "location": { "file": "peter_dashboard/app.py", "line": 1 },
      "affectedFiles": ["peter_dashboard/app.py"],
      "scores": { "impact": 3, "spread": 1, "effortInverse": 2, "priority": 2.5 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-003",
      "category": "CX",
      "title": "Large domains/peterbot/parser.py (2706 lines)",
      "description": "The parser module is 2706 lines containing response parsing, test fixtures, and embedded test data. Test data and tests should be separate from production code.",
      "location": { "file": "domains/peterbot/parser.py", "line": 1 },
      "affectedFiles": ["domains/peterbot/parser.py"],
      "scores": { "impact": 3, "spread": 1, "effortInverse": 3, "priority": 2.5 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-004",
      "category": "ERR",
      "title": "Bare except clauses in hadley_api/main.py",
      "description": "5 instances of bare 'except:' without specifying exception type at lines 1780, 1787, 2179, 4875, 4881. This catches all exceptions including KeyboardInterrupt and SystemExit, making debugging difficult and potentially hiding bugs.",
      "location": { "file": "hadley_api/main.py", "line": 1780 },
      "affectedFiles": ["hadley_api/main.py"],
      "scores": { "impact": 3, "spread": 1, "effortInverse": 5, "priority": 2.8 },
      "priorityLabel": "MEDIUM",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T12:15:00Z",
      "resolvedCommit": "aba7c492d8cfa9178f5025d5d2d892926889516d",
      "resolution": "Replaced 5 bare except: with except Exception: to allow proper signal handling"
    },
    {
      "id": "DEBT-005",
      "category": "ERR",
      "title": "Bare except clauses in peter_dashboard/app.py",
      "description": "7 instances of bare 'except:' at lines 93, 224, 334, 353, 392, 412, 904. Silent failures with no logging make troubleshooting impossible.",
      "location": { "file": "peter_dashboard/app.py", "line": 93 },
      "affectedFiles": ["peter_dashboard/app.py"],
      "scores": { "impact": 3, "spread": 1, "effortInverse": 5, "priority": 2.8 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-006",
      "category": "ARCH",
      "title": "Repeated imports inside functions (61 occurrences)",
      "description": "hadley_api/main.py imports 'from google_auth import get_gmail_service' (and similar) inside each endpoint function instead of at module level. This pattern is repeated 61 times. While it enables lazy loading, it creates code duplication and makes dependencies unclear.",
      "location": { "file": "hadley_api/main.py", "line": 51 },
      "affectedFiles": ["hadley_api/main.py"],
      "scores": { "impact": 2, "spread": 1, "effortInverse": 3, "priority": 2.0 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-007",
      "category": "DC",
      "title": "Print statements instead of logging (210 instances)",
      "description": "Found 210 print() statements across the codebase outside of test files. Production code should use structured logging for observability, log levels, and proper output handling.",
      "location": { "file": "domains/api_usage/services/anthropic_scraper.py", "line": 130 },
      "affectedFiles": ["multiple files - 210 occurrences"],
      "scores": { "impact": 2, "spread": 4, "effortInverse": 3, "priority": 2.5 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-008",
      "category": "ARCH",
      "title": "Environment variable access scattered across modules",
      "description": "Environment variables are accessed directly via os.getenv() in 20+ locations outside of config.py (bot.py:72-73, hadley_api/main.py:1025-1027, hadley_api/google_auth.py, domains/peterbot/domain.py, etc.). Configuration should be centralized in config.py.",
      "location": { "file": "bot.py", "line": 72 },
      "affectedFiles": ["bot.py", "hadley_api/main.py", "hadley_api/google_auth.py", "domains/peterbot/domain.py", "domains/nutrition/services/garmin.py"],
      "scores": { "impact": 2, "spread": 4, "effortInverse": 3, "priority": 2.5 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-009",
      "category": "ARCH",
      "title": "Global state management pattern",
      "description": "9 uses of 'global' keyword for managing module-level state (bot.py:114, garmin.py:20, memory.py:249, google_auth.py:37, main.py:1556/1623/1703). Consider using class-based singletons or dependency injection for better testability.",
      "location": { "file": "bot.py", "line": 114 },
      "affectedFiles": ["bot.py", "domains/nutrition/services/garmin.py", "domains/peterbot/memory.py", "hadley_api/google_auth.py", "hadley_api/main.py"],
      "scores": { "impact": 2, "spread": 3, "effortInverse": 2, "priority": 2.2 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-010",
      "category": "DC",
      "title": "Test code embedded in production parser.py",
      "description": "domains/peterbot/parser.py contains embedded test code and test fixtures (lines 996+, 1003+, 2690-2706). Test code should be moved to the tests/ directory.",
      "location": { "file": "domains/peterbot/parser.py", "line": 2690 },
      "affectedFiles": ["domains/peterbot/parser.py"],
      "scores": { "impact": 1, "spread": 1, "effortInverse": 4, "priority": 1.7 },
      "priorityLabel": "LOW",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-011",
      "category": "ARCH",
      "title": "Synchronous requests in async-capable codebase",
      "description": "kia_get_token.py uses synchronous requests.Session() while the main bot is async. scripts/google_oauth_setup.py also uses sync requests. Should use httpx for consistency with the async codebase.",
      "location": { "file": "kia_get_token.py", "line": 10 },
      "affectedFiles": ["kia_get_token.py", "scripts/google_oauth_setup.py"],
      "scores": { "impact": 1, "spread": 2, "effortInverse": 4, "priority": 1.7 },
      "priorityLabel": "LOW",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-012",
      "category": "DEP",
      "title": "Duplicate httpx versions in requirements",
      "description": "httpx>=0.27.0 in requirements.txt but httpx>=0.24.0 in hadley_api/requirements.txt. Version requirements should be consistent across the project.",
      "location": { "file": "requirements.txt", "line": 4 },
      "affectedFiles": ["requirements.txt", "hadley_api/requirements.txt"],
      "scores": { "impact": 1, "spread": 2, "effortInverse": 5, "priority": 1.5 },
      "priorityLabel": "LOW",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    }
  ]
}
