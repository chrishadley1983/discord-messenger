{
  "version": "1.0",
  "lastUpdated": "2026-02-01T13:10:00Z",
  "scanCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
  "items": [
    {
      "id": "DEBT-001",
      "category": "CX",
      "title": "Monolithic hadley_api/main.py (5472 lines)",
      "description": "The main.py file contains 124 functions and 5472 lines of code. All API endpoints are in a single file with imports repeated 61 times inside functions.",
      "location": { "file": "hadley_api/main.py", "line": 1 },
      "affectedFiles": ["hadley_api/main.py"],
      "scores": { "impact": 4, "spread": 1, "effortInverse": 2, "priority": 3.0 },
      "priorityLabel": "HIGH",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-002",
      "category": "CX",
      "title": "Large peter_dashboard/app.py (2922 lines)",
      "description": "Dashboard Flask app is a single 2922-line file. Contains mixed concerns.",
      "location": { "file": "peter_dashboard/app.py", "line": 1 },
      "affectedFiles": ["peter_dashboard/app.py"],
      "scores": { "impact": 3, "spread": 1, "effortInverse": 2, "priority": 2.5 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-003",
      "category": "CX",
      "title": "Large domains/peterbot/parser.py (now 632 lines)",
      "description": "Parser module was 2706 lines. Test code extracted to tests/test_peterbot_parser.py.",
      "location": { "file": "domains/peterbot/parser.py", "line": 1 },
      "affectedFiles": ["domains/peterbot/parser.py"],
      "scores": { "impact": 3, "spread": 1, "effortInverse": 3, "priority": 2.5 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "note": "Reduced from 2706 to 632 lines after DEBT-010 fix"
    },
    {
      "id": "DEBT-004",
      "category": "ERR",
      "title": "Bare except clauses in hadley_api/main.py",
      "description": "5 instances of bare 'except:' replaced with 'except Exception:'",
      "location": { "file": "hadley_api/main.py", "line": 1780 },
      "affectedFiles": ["hadley_api/main.py"],
      "scores": { "impact": 3, "spread": 1, "effortInverse": 5, "priority": 2.8 },
      "priorityLabel": "MEDIUM",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T12:15:00Z",
      "resolution": "Replaced 5 bare except: with except Exception:"
    },
    {
      "id": "DEBT-005",
      "category": "ERR",
      "title": "Bare except clauses in peter_dashboard/app.py",
      "description": "7 instances of bare 'except:' replaced with 'except Exception:'",
      "location": { "file": "peter_dashboard/app.py", "line": 93 },
      "affectedFiles": ["peter_dashboard/app.py"],
      "scores": { "impact": 3, "spread": 1, "effortInverse": 5, "priority": 2.8 },
      "priorityLabel": "MEDIUM",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T12:20:00Z",
      "resolution": "Replaced 7 bare except: with except Exception:"
    },
    {
      "id": "DEBT-006",
      "category": "ARCH",
      "title": "Repeated imports inside functions (61 occurrences)",
      "description": "hadley_api/main.py imports inside each endpoint function instead of at module level.",
      "location": { "file": "hadley_api/main.py", "line": 51 },
      "affectedFiles": ["hadley_api/main.py"],
      "scores": { "impact": 2, "spread": 1, "effortInverse": 3, "priority": 2.0 },
      "priorityLabel": "MEDIUM",
      "status": "DETECTED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z"
    },
    {
      "id": "DEBT-007",
      "category": "DC",
      "title": "Print statements instead of logging",
      "description": "Only 1 print() in production code (anthropic_scraper.py). Other 209 in scripts/tests (acceptable).",
      "location": { "file": "domains/api_usage/services/anthropic_scraper.py", "line": 130 },
      "affectedFiles": ["domains/api_usage/services/anthropic_scraper.py"],
      "scores": { "impact": 2, "spread": 4, "effortInverse": 3, "priority": 2.5 },
      "priorityLabel": "MEDIUM",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T12:35:00Z",
      "resolution": "Replaced print() with logger.error() in anthropic_scraper.py"
    },
    {
      "id": "DEBT-008",
      "category": "ARCH",
      "title": "Environment variable access scattered across modules",
      "description": "Bot.py and domain.py now import from config.py instead of reading env directly.",
      "location": { "file": "bot.py", "line": 72 },
      "affectedFiles": ["bot.py", "domains/peterbot/domain.py"],
      "scores": { "impact": 2, "spread": 4, "effortInverse": 3, "priority": 2.5 },
      "priorityLabel": "MEDIUM",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T12:45:00Z",
      "resolution": "Updated bot.py and domain.py to import from config"
    },
    {
      "id": "DEBT-009",
      "category": "ARCH",
      "title": "Global state management pattern",
      "description": "Only 3 uses of 'global' keyword, all intentional lazy singleton patterns.",
      "location": { "file": "domains/nutrition/services/garmin.py", "line": 20 },
      "affectedFiles": ["domains/nutrition/services/garmin.py", "domains/peterbot/memory.py", "hadley_api/google_auth.py"],
      "scores": { "impact": 2, "spread": 3, "effortInverse": 2, "priority": 2.2 },
      "priorityLabel": "MEDIUM",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T12:50:00Z",
      "resolution": "Verified as intentional lazy singleton patterns for API client caching"
    },
    {
      "id": "DEBT-010",
      "category": "DC",
      "title": "Test code embedded in production parser.py",
      "description": "Extracted ~2000 lines of test code to tests/test_peterbot_parser.py.",
      "location": { "file": "domains/peterbot/parser.py", "line": 2690 },
      "affectedFiles": ["domains/peterbot/parser.py", "tests/test_peterbot_parser.py"],
      "scores": { "impact": 1, "spread": 1, "effortInverse": 4, "priority": 1.7 },
      "priorityLabel": "LOW",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T13:00:00Z",
      "resolution": "Extracted test code to tests/test_peterbot_parser.py. parser.py reduced from 2706 to 632 lines."
    },
    {
      "id": "DEBT-011",
      "category": "ARCH",
      "title": "Synchronous requests in async-capable codebase",
      "description": "Setup scripts use sync requests - appropriate for interactive scripts.",
      "location": { "file": "kia_get_token.py", "line": 10 },
      "affectedFiles": ["kia_get_token.py", "scripts/google_oauth_setup.py"],
      "scores": { "impact": 1, "spread": 2, "effortInverse": 4, "priority": 1.7 },
      "priorityLabel": "LOW",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T13:05:00Z",
      "resolution": "Verified as acceptable - sync is correct for interactive setup scripts"
    },
    {
      "id": "DEBT-012",
      "category": "DEP",
      "title": "Duplicate httpx versions in requirements",
      "description": "httpx version aligned to >=0.27.0 across all requirements files.",
      "location": { "file": "requirements.txt", "line": 4 },
      "affectedFiles": ["requirements.txt", "hadley_api/requirements.txt"],
      "scores": { "impact": 1, "spread": 2, "effortInverse": 5, "priority": 1.5 },
      "priorityLabel": "LOW",
      "status": "RESOLVED",
      "detectedCommit": "150abbe273faff57aa1a23057935608eb88ac28d",
      "detectedDate": "2026-02-01T12:00:00Z",
      "resolvedDate": "2026-02-01T12:30:00Z",
      "resolution": "Updated hadley_api/requirements.txt httpx version to >=0.27.0"
    }
  ]
}
